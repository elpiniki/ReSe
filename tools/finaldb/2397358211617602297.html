<?xml version="1.0" encoding="utf-8" ?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> <head> <meta http-equiv="Content-Type" content="application/xhtml+xml;charset=utf-8"/> <link rel="stylesheet" href="../site.css" type="text/css"/> <link rel="stylesheet" href="musings.css" type="text/css"/> <link rel="stylesheet" href="../TeX.css" type="text/css"/> <title>Stephen Checkoway :: More LaTeX Hacking</title> </head> <body> <script type="text/javascript">/*! <![CDATA[*/
;var _id="UA-15672784-1";var _gaq=_gaq||[];_gaq.push(["_setAccount",_id]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();
/*! ]]>*/;</script> <div id="layout-content"> <div id="toptitle"> <h1>More <span class="tex">L<span class="raise">a</span>T<span class="drop">e</span>X</span> Hacking</h1> <div id="subtitle">Stephen Checkoway</div> </div> <p>After I presented &ldquo;<a href="//www.cs.jhu.edu/~s/papers/tex2010.html">Are Text-Only Data Formats Safe? Or, Use This <span class="tex">L<span class="raise">a</span>T<span class="drop">e</span>X</span> Class File to Pwn Your Computer</a>&rdquo; at LEET&nbsp;2010, I was asked if I planned to do any more research on <span class="tex">T<span class="drop">e</span>X</span>. My answer was no. It was a fun little project to do but not really part of my Research Agenda<sup>TM</sup>. Imagine my surprise to find myself once again writing about <span class="tex">T<span class="drop">e</span>X</span> hacking.</p> <p>One of the questions that came out of this project was could I, after performing all of the research into the internals of <span class="tex">L<span class="raise">a</span>T<span class="drop">e</span>X</span>, write a blacklist filter that would make embedding a preview service into a website safe. Publicly, my answer was no, but secretly, my answer was yes. <i>Of course I can do this</i>, I told myself. After all, there were just a few macros that really needed to be filtered out. I could prevent category code changes. I could leverage <span class="tex">T<span class="drop">e</span>X</span> itself to perform filtering. This would enable me to simply redefine the troublesome macros and primitives to be harmless. This isn't a new idea, but I figured that <i>I</i> could do it correctly.</p> <p>Ah hubris. Imagine my surprise to discover a new primitive in pdf<span class="tex">T<span class="drop">e</span>X</span>: <tt>\pdfprimitive</tt> from the excellent <a href="http://tex.stackexchange.com/questions/13771/let-a-control-sequence-to-a-redefined-primitive">TeX-SX</a> This primitive causes the following control sequence to have its primitive meaning, if it has one. For example, if <tt>\input</tt> has been redefined (e.g., to <tt>\relax</tt>), one can write <tt>\pdfprimitive\input</tt> to get the original meaning. I guess it is a good thing I never wrote such a blacklist.</p> <p>I'm happy to say that our &ldquo;promising approach&rdquo; of using Web2C's runtime configuration parameter <tt>openin_any</tt> still appears to be the best way to prevent data exfiltration.</p> <p>So now that I know about <tt>\pdfprimitive</tt>, could I write a safe blacklist?</p> <div id="footer"> <div id="footer-text"> Last updated 2013-10-08 17:40:55 EDT. </div> </div> </div> </body> </html>